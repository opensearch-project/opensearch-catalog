{"attributes":{"description":"golang client getting started applicative log tutorial for logging applicative telemetry data in golang language to opensearch","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"golang client getting started","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"golang client getting started\",\"type\":\"markdown\",\"aggs\":[],\"params\":{\"fontSize\":12,\"openLinksInNewTab\":false,\"markdown\":\"# Golang Client Integration\\nThe next integration contains instructions and tutorial of setting up golang opensearch client and logging applicative telemetry into opensearch.\\n\\n## OpenSearch Go Client Documentation\\n\\nThe OpenSearch Go client allows you to connect your Go application with the data in your OpenSearch cluster.\\nThis guide illustrates how to connect to OpenSearch, index documents, and run queries.\\n\\n## Setup\\n\\nTo start a new project:\\n```bash\\ngo mod init <mymodulename>\\n```\\nAdd the Go client to your project:\\n```bash\\ngo get github.com/opensearch-project/opensearch-go\\n```\\n\\n## Connecting to OpenSearch\\n\\nTo connect to the default OpenSearch host, create a client object with the address https://localhost:9200\\nIf using the Security plugin:\\n\\n```go\\nclient, err := opensearch.NewClient(opensearch.Config{\\n    Transport: &http.Transport{\\n        TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\\n    },\\n    Addresses: []string{\\\"https://localhost:9200\\\"},\\n    Username:  \\\"admin\\\", // For testing only. Don't store credentials in code.\\n    Password:  \\\"admin\\\",\\n})\\n```\\nWithout the Security plugin:\\n```go\\nclient, err := opensearch.NewClient(opensearch.Config{\\n    Transport: &http.Transport{\\n        TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\\n    },\\n    Addresses: []string{\\\"http://localhost:9200\\\"},\\n})\\n```\\n\\n## Creating an Index\\n\\nTo create an index:\\n```go\\nsettings := strings.NewReader(`{\\n    \\\"settings\\\": {\\n        \\\"index\\\": {\\n            \\\"number_of_shards\\\": 1,\\n            \\\"number_of_replicas\\\": 0\\n        }\\n    }\\n}`)\\n\\nres := opensearchapi.IndicesCreateRequest{\\n    Index: \\\"go-test-index1\\\",\\n    Body:  settings,\\n}\\n```\\n\\n## Indexing a Document\\n\\nTo index a document:\\n```go\\ndocument := strings.NewReader(`{\\n    \\\"title\\\": \\\"Moneyball\\\",\\n    \\\"director\\\": \\\"Bennett Miller\\\",\\n    \\\"year\\\": \\\"2011\\\"\\n}`)\\n\\ndocId := \\\"1\\\"\\nreq := opensearchapi.IndexRequest{\\n    Index:      \\\"go-test-index1\\\",\\n    DocumentID: docId,\\n    Body:       document,\\n}\\ninsertResponse, err := req.Do(context.Background(), client)\\n```\\n\\n## Performing Bulk Operations\\n\\nTo perform bulk operations:\\n```go\\nblk, err := client.Bulk(\\n    strings.NewReader(`\\n    { \\\"index\\\" : { \\\"_index\\\" : \\\"go-test-index1\\\", \\\"_id\\\" : \\\"2\\\" } }\\n    { \\\"title\\\" : \\\"Interstellar\\\", \\\"director\\\" : \\\"Christopher Nolan\\\", \\\"year\\\" : \\\"2014\\\"}\\n    { \\\"create\\\" : { \\\"_index\\\" : \\\"go-test-index1\\\", \\\"_id\\\" : \\\"3\\\" } }\\n    { \\\"title\\\" : \\\"Star Trek Beyond\\\", \\\"director\\\" : \\\"Justin Lin\\\", \\\"year\\\" : \\\"2015\\\"}\\n    { \\\"update\\\" : {\\\"_id\\\" : \\\"3\\\", \\\"_index\\\" : \\\"go-test-index1\\\" } }\\n    { \\\"doc\\\" : {\\\"year\\\" : \\\"2016\\\"} }\\n`),\\n)\\n```\\n\\n## Searching for Documents\\n\\nTo search for documents:\\n```go\\ncontent := strings.NewReader(`{\\n    \\\"size\\\": 5,\\n    \\\"query\\\": {\\n        \\\"multi_match\\\": {\\n        \\\"query\\\": \\\"miller\\\",\\n        \\\"fields\\\": [\\\"title^2\\\", \\\"director\\\"]\\n        }\\n    }\\n}`)\\n\\nsearch := opensearchapi.SearchRequest{\\n    Index: []string{\\\"go-test-index1\\\"},\\n    Body: content,\\n}\\n\\nsearchResponse, err := search.Do(context.Background(), client)\\n```\\n\\nIn order to log Applicative activities, generate a log entry struct that collects applicative telemetry :\\n```\\ntype LogEntry struct {\\n    Timestamp string `json:\\\"timestamp\\\"`\\n    Level     string `json:\\\"level\\\"`\\n    Message   string `json:\\\"message\\\"`\\n    Source    string `json:\\\"source\\\"`\\n    Module    string `json:\\\"module\\\"`\\n    Function  string `json:\\\"function\\\"`\\n    UserID    string `json:\\\"user_id\\\"`\\n}\\n```\\nThis would log into a dedicated applicative index for storing the application's telemetry info\\n\\n\\nHere is a complete sample application:\\n\\n```\\npackage main\\n\\nimport (\\n    \\\"context\\\"\\n    \\\"crypto/tls\\\"\\n    \\\"encoding/json\\\"\\n    \\\"fmt\\\"\\n    \\\"log\\\"\\n    \\\"net/http\\\"\\n    \\\"time\\\"\\n\\n    opensearch \\\"github.com/opensearch-project/opensearch-go\\\"\\n    opensearchapi \\\"github.com/opensearch-project/opensearch-go/opensearchapi\\\"\\n)\\n\\n// LogEntry represents the structure of the log entry\\ntype LogEntry struct {\\n    Timestamp string `json:\\\"timestamp\\\"`\\n    Level     string `json:\\\"level\\\"`\\n    Message   string `json:\\\"message\\\"`\\n    Source    string `json:\\\"source\\\"`\\n    Module    string `json:\\\"module\\\"`\\n    Function  string `json:\\\"function\\\"`\\n    UserID    string `json:\\\"user_id\\\"`\\n}\\n\\n// InitOpenSearchClient initializes the OpenSearch client\\nfunc InitOpenSearchClient() (*opensearch.Client, error) {\\n    client, err := opensearch.NewClient(opensearch.Config{\\n        Transport: &http.Transport{\\n            TLSClientConfig: &tls.Config{InsecureSkipVerify: true},\\n        },\\n        Addresses: []string{\\\"https://localhost:9200\\\"},\\n        Username:  \\\"admin\\\",\\n        Password:  \\\"admin\\\",\\n    })\\n    if err != nil {\\n        return nil, fmt.Errorf(\\\"failed to create OpenSearch client: %w\\\", err)\\n    }\\n    return client, nil\\n}\\n\\n// LogToOpenSearch logs the provided entry to OpenSearch\\nfunc LogToOpenSearch(client *opensearch.Client, entry LogEntry) error {\\n    data, err := json.Marshal(entry)\\n    if err != nil {\\n        return fmt.Errorf(\\\"failed to marshal log entry: %w\\\", err)\\n    }\\n\\n    req := opensearchapi.IndexRequest{\\n        Index:      \\\"logs\\\",\\n        DocumentID: fmt.Sprintf(\\\"%d\\\", time.Now().UnixNano()),\\n        Body:       strings.NewReader(string(data)),\\n    }\\n\\n    res, err := req.Do(context.Background(), client)\\n    if err != nil {\\n        return fmt.Errorf(\\\"failed to index log entry: %w\\\", err)\\n    }\\n    defer res.Body.Close()\\n\\n    if res.IsError() {\\n        return fmt.Errorf(\\\"error indexing log entry: %s\\\", res.String())\\n    }\\n\\n    return nil\\n}\\n\\nfunc main() {\\n    client, err := InitOpenSearchClient()\\n    if err != nil {\\n        log.Fatalf(\\\"Error initializing OpenSearch client: %s\\\", err)\\n    }\\n\\n    logEntry := LogEntry{\\n        Timestamp: \\\"2024-02-05T12:05:00\\\",\\n        Level:     \\\"info\\\",\\n        Message:   \\\"Processing user request.\\\",\\n        Source:    \\\"your_project\\\",\\n        Module:    \\\"request_handler\\\",\\n        Function:  \\\"process_request\\\",\\n        UserID:    \\\"user_123\\\",\\n    }\\n\\n    err = LogToOpenSearch(client, logEntry)\\n    if err != nil {\\n        log.Fatalf(\\\"Error logging to OpenSearch: %s\\\", err)\\n    }\\n\\n    log.Println(\\\"Log entry successfully written to OpenSearch\\\")\\n}\\n```\\n\\n## Best Practices for Effective Logging\\n\\n1. **Descriptive Log Messages**: Include clear and detailed information.\\n2. **Appropriate Log Levels**: Use different levels (INFO, DEBUG, ERROR) to categorize log messages.\\n3. **Timestamps**: Always include timestamps for chronological analysis.\\n4. **Contextual Information**: Add details like module, function, or user IDs.\\n5. **Avoid Redundant Logging**: Balance between sufficient information and avoiding overload.\\n6. **Secure Sensitive Information**: Do not log sensitive data in plain text.\\n7. **Structured Logging**: Use JSON for consistent log formats.\\n\\n## Advanced Features of OpenSearch\\n\\n- **Index Patterns and Mappings**: Optimize log data structure for better analysis and retrieval.\\n- **Visualization with Dashboards**: Create interactive dashboards for real-time log insights.\\n\\n# How to build an Application Monitor Dashboard\\nBased on the ingested logs, lets review the process of generating an informative monitor dashboard for the applicative logs:\\n\\n## Step-by-Step Tutorial: Creating an OpenSearch Dashboard for Application Logs\\n\\n### 1. Log in to opensearch dashboards\\n- Navigate to OpenSearch Dashboards.\\n- Log in and verify the logs index was created and contains logs data\\n- Go to Discover tab, select the index name and view the data\\n\\n### 2. Create an Index Pattern\\n-  Go to 'Management' > 'Index Patterns'.\\n-  Click 'Create Index Pattern' and enter the pattern (e.g., logs-*).\\n-  Select the timestamp field (e.g., @timestamp) for time-based data.\\n-  Save the index pattern.\\n\\n### 3. Build Log Queries\\n- Go to the 'Discover' tab.\\n- Use the search bar to filter logs, e.g., `log_level:ERROR` to find all error logs.\\n- For advanced filtering, utilize the Dashboard Query Language (DQL).\\n\\n### 4. Save Your Query\\n- After refining your query, save it by clicking on the 'Save' button in the 'Discover' tab.\\n- Name your saved query for easy reference.\\n\\n### 5. Create Visualizations\\n- Go to 'Visualize' > 'Create Visualization'.\\n- Select the type of visualization you want to create (e.g., bar chart, pie chart).\\n- Choose your saved query as the data source.\\n\\n### 6. Add Buckets for Data Aggregation\\n- In the visualization settings, add buckets to aggregate your data. For example:\\n    - Use 'Date Histogram' for the X-axis to display logs over time.\\n    - Add other metrics or aggregations as needed.\\n\\n### 7. Split Series for Detailed Insights\\n- Add another bucket to split data by specific fields, such as `service.name` or `host.name`.\\n- This will allow you to see log distributions across different services or hosts.\\n\\n### 8. Customize Visualization\\n- Customize the visualization with labels, colors, and other settings to make it more informative and visually appealing.\\n\\n### 9. Save and Add to Dashboard\\n- Save the visualization with a descriptive name.\\n- Navigate to the 'Dashboard' tab and create a new dashboard.\\n- Add your saved visualizations to the dashboard by selecting them from the list.\\n\\n### 10. Finalize and Share\\n- Arrange the visualizations on the dashboard as desired.\\n- Save the dashboard with a meaningful name.\\n- Share the dashboard with your team by generating a shareable link or embedding it in your application.\\n\\n### Tips for Effective Dashboards\\n- Use different types of visualizations to present various aspects of your log data.\\n- Regularly update the time filter to ensure you're viewing the most recent logs.\\n- Take advantage of OpenSearch Dashboards' interactive features, such as drill-downs and filters, for deeper analysis.\\n\\n\"}}"},"id":"37dbabf0-3ff7-11ef-a406-af6eb3c84d77","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2024-07-12T02:34:09.838Z","version":"WzQxLDVd"}
{"attributes":{"description":"golang client getting started applicative log tutorial for logging applicative telemetry data in golang language to opensearch","hits":0,"kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"language\":\"kuery\",\"query\":\"\"},\"filter\":[]}"},"optionsJSON":"{\"hidePanelTitles\":false,\"useMargins\":true}","panelsJSON":"[{\"version\":\"2.15.0\",\"gridData\":{\"x\":0,\"y\":0,\"w\":24,\"h\":15,\"i\":\"b7e27081-5e45-44c7-bdb4-ea02a793be38\"},\"panelIndex\":\"b7e27081-5e45-44c7-bdb4-ea02a793be38\",\"embeddableConfig\":{},\"panelRefName\":\"panel_0\"}]","timeRestore":false,"title":"golang client getting started dashboard","version":1},"id":"40713e10-3ff7-11ef-a406-af6eb3c84d77","migrationVersion":{"dashboard":"7.9.3"},"references":[{"id":"37dbabf0-3ff7-11ef-a406-af6eb3c84d77","name":"panel_0","type":"visualization"}],"type":"dashboard","updated_at":"2024-07-12T02:34:24.241Z","version":"WzQyLDVd"}
{"exportedCount":2,"missingRefCount":0,"missingReferences":[]}