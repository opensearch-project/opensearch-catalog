{"attributes":{"description":"","kibanaSavedObjectMeta":{"searchSourceJSON":"{\"query\":{\"query\":\"\",\"language\":\"kuery\"},\"filter\":[]}"},"title":"Service Duration SLO heatmap","uiStateJSON":"{}","version":1,"visState":"{\"title\":\"Service Duration SLO heatmap\",\"type\":\"vega\",\"aggs\":[],\"params\":{\"spec\":\"{\\n  \\\"$schema\\\": \\\"https://vega.github.io/schema/vega-lite/v5.json\\\",\\n   \\\"vconcat\\\": [\\n    {\\n      \\\"title\\\": {\\n        \\\"text\\\": \\\"SLO Services Durations\\\",\\n        \\\"subtitle\\\": \\\"Hourly Service Duration SLO heatmap\\\",\\n        \\\"color\\\": \\\"black\\\"\\n  },\\n      \\\"width\\\": 1000,\\n      \\\"height\\\": {\\\"step\\\": 29},\\n      \\\"data\\\": {\\n        \\\"name\\\": \\\"data-raw\\\",\\n        \\\"url\\\": {\\n          \\\"%context%\\\": \\\"true\\\",\\n          \\\"%timefield%\\\": \\\"startTime\\\",\\n          \\\"index\\\": \\\"otel-v1-apm-span-*\\\",\\n          \\\"body\\\": {\\n            \\\"size\\\": 0,\\n            \\\"aggs\\\": {\\n              \\\"time_buckets\\\": {\\n                \\\"date_histogram\\\": {\\n                  \\\"field\\\": \\\"startTime\\\",\\n                  \\\"interval\\\": {\\n                    \\\"%autointerval%\\\": true\\n                  },\\n                  \\\"extended_bounds\\\": {\\n                    \\\"min\\\": {\\n                      \\\"%timefilter%\\\": \\\"min\\\"\\n                    },\\n                    \\\"max\\\": {\\n                      \\\"%timefilter%\\\": \\\"max\\\"\\n                    }\\n                  },\\n                  \\\"min_doc_count\\\": 0\\n                },\\n                \\\"aggs\\\": {\\n                  \\\"time_buckets\\\": {\\n                    \\\"date_histogram\\\": {\\n                      \\\"field\\\": \\\"startTime\\\",\\n                      \\\"calendar_interval\\\": \\\"1h\\\"\\n                    },\\n                    \\\"aggs\\\": {\\n                      \\\"service_names\\\": {\\n                        \\\"terms\\\": {\\n                          \\\"field\\\": \\\"serviceName\\\",\\n                          \\\"order\\\": {\\n                            \\\"_count\\\": \\\"desc\\\"\\n                          }\\n                        },\\n                        \\\"aggs\\\": {\\n                          \\\"avg_duration\\\": {\\n                            \\\"avg\\\": {\\n                              \\\"field\\\": \\\"durationInNanos\\\"\\n                            }\\n                          }\\n                        }\\n                      }\\n                    }\\n                  }\\n                }\\n              }\\n            }\\n          }\\n        },\\n        \\\"format\\\": {\\n          \\\"type\\\": \\\"json\\\",\\n          \\\"property\\\": \\\"aggregations.time_buckets.buckets\\\"\\n        }\\n      },\\n      \\\"transform\\\": [\\n        {\\n           \\\"calculate\\\": \\\"timeFormat(utcParse(datum.key_as_string,'%Y-%m-%dT%H:%M:%S.%LZ'), '%B %d, %Y %H:%M')\\\",\\n          \\\"as\\\": \\\"time\\\"\\n        },\\n        {\\n          \\\"calculate\\\": \\\"datum.time_buckets.buckets\\\", \\\"as\\\": \\\"servicesData\\\"\\n        },\\n        {\\n          \\\"flatten\\\": [\\\"servicesData\\\"], \\\"as\\\": [\\\"flatten\\\"]\\n        },\\n        {\\n          \\\"flatten\\\": [\\\"flatten.service_names.buckets\\\"], \\\"as\\\": [\\\"serviceInfo\\\"]\\n        },\\n        {\\n          \\\"calculate\\\": \\\"datum.serviceInfo.key\\\",\\n          \\\"as\\\": \\\"service\\\"\\n        },\\n        {\\n          \\\"calculate\\\": \\\"datum.serviceInfo.avg_duration.value\\\",\\n          \\\"as\\\": \\\"count\\\"\\n        }\\n      ],\\n      \\\"params\\\": [\\n        {\\\"name\\\": \\\"highlight\\\", \\\"select\\\": {\\\"type\\\": \\\"point\\\", \\\"on\\\": \\\"mouseover\\\"}}\\n      ],\\n      \\\"mark\\\": {\\\"type\\\": \\\"rect\\\"},\\n      \\\"encoding\\\": {\\n        \\\"x\\\": {\\n          \\\"field\\\": \\\"time\\\",\\n          \\\"type\\\": \\\"ordinal\\\"\\n        },\\n        \\\"y\\\": {\\\"field\\\": \\\"service\\\", \\\"type\\\": \\\"nominal\\\"},\\n        \\\"fill\\\": {\\n          \\\"field\\\": \\\"count\\\",\\n          \\\"type\\\": \\\"quantitative\\\",\\n          \\\"scale\\\": {\\n            \\\"range\\\": [\\\"#ECF7E1\\\", \\\"#ECEFD5\\\", \\\"#EACC87\\\", \\\"#EA8D53\\\", \\\"#EF4B2A\\\"]\\n          },\\n          \\\"legend\\\": {\\n            \\\"description\\\": \\\"Vega-Lite doesn't show the first value of the legend's gradient so I used zero twice in the values array\\\",\\n            \\\"values\\\": [0, 0, 1000, 5000, 10000, 25000, 5000],\\n            \\\"color\\\": \\\"black\\\",\\n            \\\"title\\\": [\\n              \\\"Duration SLO Index (DSI)\\\",\\n              \\\"0: No Duration ; 50000: Exceptional Duration\\\"\\n            ]\\n          }\\n        },\\n        \\\"strokeWidth\\\": {\\n          \\\"condition\\\": [{\\\"param\\\": \\\"highlight\\\", \\\"empty\\\": false, \\\"value\\\": 1}],\\n          \\\"value\\\": 0\\n        },\\n        \\\"tooltip\\\": [\\n          {\\\"field\\\": \\\"service\\\"},\\n          {\\\"field\\\": \\\"time\\\", \\\"title\\\": \\\"Date\\\"},\\n          {\\\"field\\\": \\\"count\\\"}\\n        ]\\n      }\\n    },\\n    {\\n      \\\"data\\\": {\\\"values\\\": [{}]},\\n      \\\"layer\\\": [\\n        {\\n          \\\"mark\\\": {\\n            \\\"type\\\": \\\"text\\\",\\n            \\\"text\\\": \\\"RED: Hourly Services Duration Heat Map  \\\",\\n            \\\"font\\\": \\\"Outfit\\\",\\n\\n            \\\"dx\\\": 360,\\n            \\\"dy\\\": 18\\n          }\\n        }\\n      ]\\n    }\\n  ],\\n  \\\"config\\\": {\\n    \\\"background\\\": \\\"#f4f7ff\\\",\\n    \\\"padding\\\": {\\\"top\\\": 10, \\\"bottom\\\": 10, \\\"left\\\": 30, \\\"right\\\": 30},\\n    \\\"view\\\": {\\\"stroke\\\": null},\\n    \\\"font\\\": \\\"Test Karbon\\\",\\n    \\\"axis\\\": {\\n      \\\"grid\\\": false,\\n      \\\"labelColor\\\": \\\"black\\\",\\n      \\\"labelFontSize\\\": 17,\\n      \\\"title\\\": null\\n    },\\n    \\\"axisX\\\": {\\n      \\\"orient\\\": \\\"bottom\\\",\\n      \\\"domainColor\\\": \\\"black\\\",\\n      \\\"offset\\\": 5,\\n      \\\"tickCount\\\": 10,\\n      \\\"tickOffset\\\": 5,\\n      \\\"tickSize\\\": 8,\\n      \\\"tickColor\\\": \\\"black\\\",\\n      \\\"labelPadding\\\": 5,\\n      \\\"labelFlush\\\": false\\n    },\\n    \\\"axisY\\\": {\\n      \\\"domain\\\": false,\\n      \\\"ticks\\\": false,\\n      \\\"labelAlign\\\": \\\"left\\\",\\n      \\\"labelPadding\\\": 140\\n    },\\n    \\\"rect\\\": {\\\"width\\\": 14.5, \\\"height\\\": 20, \\\"stroke\\\": \\\"black\\\"},\\n    \\\"text\\\": {\\\"fontSize\\\": 13},\\n    \\\"legend\\\": {\\n      \\\"orient\\\": \\\"none\\\",\\n      \\\"direction\\\": \\\"horizontal\\\",\\n      \\\"gradientLength\\\": 300,\\n      \\\"gradientThickness\\\": 10,\\n      \\\"gradientLabelOffset\\\": 5,\\n      \\\"labelFont\\\": \\\"Outfit\\\",\\n      \\\"labelFontSize\\\": 13,\\n      \\\"titlePadding\\\": 5,\\n      \\\"titleFont\\\": \\\"Outfit\\\",\\n      \\\"titleFontSize\\\": 14,\\n      \\\"titleFontWeight\\\": \\\"normal\\\",\\n      \\\"titleLineHeight\\\": 20,\\n      \\\"titleLimit\\\": 300,\\n      \\\"legendX\\\": 703,\\n      \\\"legendY\\\": -140\\n    },\\n    \\\"title\\\": {\\n      \\\"anchor\\\": \\\"start\\\",\\n      \\\"offset\\\": 40,\\n      \\\"fontSize\\\": 35,\\n      \\\"subtitlePadding\\\": 10,\\n      \\\"subtitleFontSize\\\": 25\\n    },\\n    \\\"concat\\\": {\\\"spacing\\\": 0}\\n  }\\n}\"}}"},"id":"aa213fb0-b32d-11ee-8a87-757393a1a8e1","migrationVersion":{"visualization":"7.10.0"},"references":[],"type":"visualization","updated_at":"2024-01-14T22:38:40.427Z","version":"WzYwNCwzXQ=="}
{"exportedCount":1,"missingRefCount":0,"missingReferences":[]}